<!DOCTYPE html>
<html lang="pt-BR" xml:lang="pt-BR">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Filtros Digitais | Material introdutório de Processamento Digital de Imagens e Visão Computacional</title>
  <meta name="description" content="Capítulo 5 Filtros Digitais | Material introdutório de Processamento Digital de Imagens e Visão Computacional" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Filtros Digitais | Material introdutório de Processamento Digital de Imagens e Visão Computacional" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Filtros Digitais | Material introdutório de Processamento Digital de Imagens e Visão Computacional" />
  
  
  

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="transformações-radiométricas.html"/>
<link rel="next" href="segmentação.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="logo"><a href="./"><img src="imagens/logo.jpeg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Início</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introdução</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#relação-de-processamento-digital-de-imagem-visão-computacional-e-computação-gráfica"><i class="fa fa-check"></i><b>1.1</b> Relação de Processamento Digital de Imagem, Visão Computacional e Computação Gráfica</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#aplicações-processamento-digital-de-imagens"><i class="fa fa-check"></i><b>1.2</b> Aplicações Processamento Digital de Imagens</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#etapas-do-processamento-e-análise-de-imagens"><i class="fa fa-check"></i><b>1.3</b> Etapas do Processamento e Análise de Imagens</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html"><i class="fa fa-check"></i><b>2</b> Formação da imagem</a><ul>
<li class="chapter" data-level="2.1" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#câmera-pinhole-e-geometria"><i class="fa fa-check"></i><b>2.1</b> Câmera <em>pinhole</em> e geometria</a></li>
<li class="chapter" data-level="2.2" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#lentes-finas"><i class="fa fa-check"></i><b>2.2</b> Lentes Finas</a></li>
<li class="chapter" data-level="2.3" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#sensor"><i class="fa fa-check"></i><b>2.3</b> Sensor</a></li>
<li class="chapter" data-level="2.4" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#amostragem-e-quantização"><i class="fa fa-check"></i><b>2.4</b> Amostragem e Quantização</a><ul>
<li class="chapter" data-level="2.4.1" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#amostragem"><i class="fa fa-check"></i><b>2.4.1</b> Amostragem</a></li>
<li class="chapter" data-level="2.4.2" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#quantização"><i class="fa fa-check"></i><b>2.4.2</b> Quantização</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#formacaoImg"><i class="fa fa-check"></i><b>2.5</b> Definição de imagem digital</a></li>
<li class="chapter" data-level="2.6" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#resolução-espacial-e-de-intensidade"><i class="fa fa-check"></i><b>2.6</b> Resolução espacial e de intensidade</a></li>
<li class="chapter" data-level="2.7" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#pixels"><i class="fa fa-check"></i><b>2.7</b> Pixels</a><ul>
<li class="chapter" data-level="2.7.1" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#vizin"><i class="fa fa-check"></i><b>2.7.1</b> Vizinhança</a></li>
<li class="chapter" data-level="2.7.2" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#contiv"><i class="fa fa-check"></i><b>2.7.2</b> Conectividade</a></li>
<li class="chapter" data-level="2.7.3" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#adja"><i class="fa fa-check"></i><b>2.7.3</b> Adjacência</a></li>
<li class="chapter" data-level="2.7.4" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#camin"><i class="fa fa-check"></i><b>2.7.4</b> Caminho</a></li>
<li class="chapter" data-level="2.7.5" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#componente-conexa"><i class="fa fa-check"></i><b>2.7.5</b> Componente Conexa</a></li>
<li class="chapter" data-level="2.7.6" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#borda-e-interior"><i class="fa fa-check"></i><b>2.7.6</b> Borda e Interior</a></li>
<li class="chapter" data-level="2.7.7" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#medidas-de-distância"><i class="fa fa-check"></i><b>2.7.7</b> Medidas de Distância</a></li>
<li class="chapter" data-level="2.7.8" data-path="formação-da-imagem.html"><a href="formação-da-imagem.html#operações-lógico-aritméticas"><i class="fa fa-check"></i><b>2.7.8</b> Operações Lógico-aritméticas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html"><i class="fa fa-check"></i><b>3</b> Transformacões geométricas</a><ul>
<li class="chapter" data-level="3.1" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#definição"><i class="fa fa-check"></i><b>3.1</b> Definição</a></li>
<li class="chapter" data-level="3.2" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#sistema-de-coordenadas-objetos-2d-e-3d"><i class="fa fa-check"></i><b>3.2</b> Sistema de coordenadas objetos (2D e 3D)</a></li>
<li class="chapter" data-level="3.3" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#representação-vetorial-e-matricial-de-imagens-digitalizadas"><i class="fa fa-check"></i><b>3.3</b> Representação Vetorial e Matricial de Imagens digitalizadas</a></li>
<li class="chapter" data-level="3.4" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#matrizes-em-computação-gráfica"><i class="fa fa-check"></i><b>3.4</b> Matrizes em Computação gráfica</a></li>
<li class="chapter" data-level="3.5" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#transformações-em-pontos-e-objetos"><i class="fa fa-check"></i><b>3.5</b> Transformações em Pontos e Objetos</a></li>
<li class="chapter" data-level="3.6" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#transformação-de-translação"><i class="fa fa-check"></i><b>3.6</b> Transformação de Translação</a></li>
<li class="chapter" data-level="3.7" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#transformação-de-escala"><i class="fa fa-check"></i><b>3.7</b> Transformação de Escala</a></li>
<li class="chapter" data-level="3.8" data-path="transformacões-geométricas.html"><a href="transformacões-geométricas.html#transformação-de-rotação"><i class="fa fa-check"></i><b>3.8</b> Transformação de Rotação</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html"><i class="fa fa-check"></i><b>4</b> Transformações radiométricas</a><ul>
<li class="chapter" data-level="4.1" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html#transformação-linear"><i class="fa fa-check"></i><b>4.1</b> Transformação Linear</a></li>
<li class="chapter" data-level="4.2" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html#transformação-logarítmica"><i class="fa fa-check"></i><b>4.2</b> Transformação Logarítmica</a></li>
<li class="chapter" data-level="4.3" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html#transformação-de-potência"><i class="fa fa-check"></i><b>4.3</b> Transformação de Potência</a></li>
<li class="chapter" data-level="4.4" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html#processamento-de-histograma"><i class="fa fa-check"></i><b>4.4</b> Processamento de histograma</a></li>
<li class="chapter" data-level="4.5" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html#equalização-do-histograma"><i class="fa fa-check"></i><b>4.5</b> Equalização do histograma</a></li>
<li class="chapter" data-level="4.6" data-path="transformações-radiométricas.html"><a href="transformações-radiométricas.html#especificação-de-histograma"><i class="fa fa-check"></i><b>4.6</b> Especificação de histograma</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="filtros-digitais.html"><a href="filtros-digitais.html"><i class="fa fa-check"></i><b>5</b> Filtros Digitais</a><ul>
<li class="chapter" data-level="5.1" data-path="filtros-digitais.html"><a href="filtros-digitais.html#convolução"><i class="fa fa-check"></i><b>5.1</b> Convolução</a><ul>
<li class="chapter" data-level="5.1.1" data-path="filtros-digitais.html"><a href="filtros-digitais.html#definção-matemática-da-convolução"><i class="fa fa-check"></i><b>5.1.1</b> Definção matemática da convolução</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="filtros-digitais.html"><a href="filtros-digitais.html#filtro-da-média"><i class="fa fa-check"></i><b>5.2</b> Filtro da Média</a></li>
<li class="chapter" data-level="5.3" data-path="filtros-digitais.html"><a href="filtros-digitais.html#filtro-da-mediana"><i class="fa fa-check"></i><b>5.3</b> Filtro da Mediana</a></li>
<li class="chapter" data-level="5.4" data-path="filtros-digitais.html"><a href="filtros-digitais.html#filtro-gaussiano"><i class="fa fa-check"></i><b>5.4</b> Filtro Gaussiano</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="segmentação.html"><a href="segmentação.html"><i class="fa fa-check"></i><b>6</b> Segmentação</a><ul>
<li class="chapter" data-level="6.1" data-path="segmentação.html"><a href="segmentação.html#detecção-por-descontinuidade"><i class="fa fa-check"></i><b>6.1</b> Detecção por descontinuidade</a><ul>
<li class="chapter" data-level="6.1.1" data-path="segmentação.html"><a href="segmentação.html#detecção-de-pontos-isolados"><i class="fa fa-check"></i><b>6.1.1</b> Detecção de pontos isolados</a></li>
<li class="chapter" data-level="6.1.2" data-path="segmentação.html"><a href="segmentação.html#detecção-de-linhas"><i class="fa fa-check"></i><b>6.1.2</b> Detecção de linhas</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="segmentação.html"><a href="segmentação.html#detecção-de-bordas"><i class="fa fa-check"></i><b>6.2</b> Detecção de Bordas</a><ul>
<li class="chapter" data-level="6.2.1" data-path="segmentação.html"><a href="segmentação.html#modelos-de-bordas"><i class="fa fa-check"></i><b>6.2.1</b> Modelos de Bordas</a></li>
<li class="chapter" data-level="6.2.2" data-path="segmentação.html"><a href="segmentação.html#método-do-gradiente-roberts-prewitt-sobel"><i class="fa fa-check"></i><b>6.2.2</b> Método do gradiente ( Roberts, Prewitt, Sobel)</a></li>
<li class="chapter" data-level="6.2.3" data-path="segmentação.html"><a href="segmentação.html#método-de-marr-hildreth"><i class="fa fa-check"></i><b>6.2.3</b> Método de Marr-Hildreth</a></li>
<li class="chapter" data-level="6.2.4" data-path="segmentação.html"><a href="segmentação.html#método-de-canny"><i class="fa fa-check"></i><b>6.2.4</b> Método de Canny</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="segmentação.html"><a href="segmentação.html#transformada-de-hough"><i class="fa fa-check"></i><b>6.3</b> Transformada de Hough</a><ul>
<li class="chapter" data-level="6.3.1" data-path="segmentação.html"><a href="segmentação.html#transformada-de-hough-para-detecção-de-linhas"><i class="fa fa-check"></i><b>6.3.1</b> Transformada de Hough para detecção de linhas</a></li>
<li class="chapter" data-level="6.3.2" data-path="segmentação.html"><a href="segmentação.html#transformada-de-hough-para-detecção-de-círculos"><i class="fa fa-check"></i><b>6.3.2</b> Transformada de Hough para detecção de círculos</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="segmentação.html"><a href="segmentação.html#detecção-de-quinas"><i class="fa fa-check"></i><b>6.4</b> Detecção de Quinas</a><ul>
<li class="chapter" data-level="6.4.1" data-path="segmentação.html"><a href="segmentação.html#detector-de-quinas-de-moravec"><i class="fa fa-check"></i><b>6.4.1</b> Detector de Quinas de Moravec</a></li>
<li class="chapter" data-level="6.4.2" data-path="segmentação.html"><a href="segmentação.html#detector-de-quinas-de-harris"><i class="fa fa-check"></i><b>6.4.2</b> Detector de Quinas de Harris</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="segmentação.html"><a href="segmentação.html#detecção-de-blobs"><i class="fa fa-check"></i><b>6.5</b> Detecção de Blobs</a><ul>
<li class="chapter" data-level="6.5.1" data-path="segmentação.html"><a href="segmentação.html#log"><i class="fa fa-check"></i><b>6.5.1</b> LoG</a></li>
<li class="chapter" data-level="6.5.2" data-path="segmentação.html"><a href="segmentação.html#dog"><i class="fa fa-check"></i><b>6.5.2</b> DoG</a></li>
<li class="chapter" data-level="6.5.3" data-path="segmentação.html"><a href="segmentação.html#doh"><i class="fa fa-check"></i><b>6.5.3</b> DoH</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="segmentação.html"><a href="segmentação.html#limiarização"><i class="fa fa-check"></i><b>6.6</b> Limiarização</a><ul>
<li class="chapter" data-level="6.6.1" data-path="segmentação.html"><a href="segmentação.html#limiarização-global-simples"><i class="fa fa-check"></i><b>6.6.1</b> Limiarização global simples</a></li>
<li class="chapter" data-level="6.6.2" data-path="segmentação.html"><a href="segmentação.html#limiarização-pelo-método-de-otsu"><i class="fa fa-check"></i><b>6.6.2</b> Limiarização pelo Método de Otsu</a></li>
<li class="chapter" data-level="6.6.3" data-path="segmentação.html"><a href="segmentação.html#uso-de-suavização-para-limiarização"><i class="fa fa-check"></i><b>6.6.3</b> Uso de suavização para limiarização</a></li>
<li class="chapter" data-level="6.6.4" data-path="segmentação.html"><a href="segmentação.html#uso-de-bordas-para-limiarização"><i class="fa fa-check"></i><b>6.6.4</b> Uso de bordas para limiarização</a></li>
<li class="chapter" data-level="6.6.5" data-path="segmentação.html"><a href="segmentação.html#limiares-múltiplos"><i class="fa fa-check"></i><b>6.6.5</b> Limiares Múltiplos</a></li>
<li class="chapter" data-level="6.6.6" data-path="segmentação.html"><a href="segmentação.html#limiarização-variável"><i class="fa fa-check"></i><b>6.6.6</b> Limiarização variável</a></li>
<li class="chapter" data-level="6.6.7" data-path="segmentação.html"><a href="segmentação.html#particionamento-da-imagem"><i class="fa fa-check"></i><b>6.6.7</b> Particionamento da imagem</a></li>
<li class="chapter" data-level="6.6.8" data-path="segmentação.html"><a href="segmentação.html#limiarização-variável-baseada-nas-propriedades-locais-da-imagem"><i class="fa fa-check"></i><b>6.6.8</b> Limiarização variável baseada nas propriedades locais da imagem</a></li>
<li class="chapter" data-level="6.6.9" data-path="segmentação.html"><a href="segmentação.html#usando-média-de-movimento"><i class="fa fa-check"></i><b>6.6.9</b> Usando média de movimento</a></li>
<li class="chapter" data-level="6.6.10" data-path="segmentação.html"><a href="segmentação.html#limiarização-baseada-em-diversas-variáveis"><i class="fa fa-check"></i><b>6.6.10</b> Limiarização baseada em diversas variáveis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html"><i class="fa fa-check"></i><b>7</b> Deep Learning em visão computacional</a><ul>
<li class="chapter" data-level="7.1" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#caracterização-de-ai-machine-learning-e-deep-learning"><i class="fa fa-check"></i><b>7.1</b> Caracterização de AI, Machine Learning e Deep Learning</a><ul>
<li class="chapter" data-level="7.1.1" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#aprendizado-supervisionado-e-não-supervisionado"><i class="fa fa-check"></i><b>7.1.1</b> Aprendizado supervisionado e não supervisionado</a></li>
<li class="chapter" data-level="7.1.2" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#redes-neurais-artificiais"><i class="fa fa-check"></i><b>7.1.2</b> Redes Neurais Artificiais</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#redes-neurais-convolucionaiscnn"><i class="fa fa-check"></i><b>7.2</b> Redes neurais convolucionais(CNN)</a><ul>
<li class="chapter" data-level="7.2.1" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#blocos-de-construção-de-uma-cnn"><i class="fa fa-check"></i><b>7.2.1</b> Blocos de construção de uma CNN</a></li>
<li class="chapter" data-level="7.2.2" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#por-que-usar-convoluções"><i class="fa fa-check"></i><b>7.2.2</b> Por que usar convoluções</a></li>
<li class="chapter" data-level="7.2.3" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#redes-cnns-clássicas"><i class="fa fa-check"></i><b>7.2.3</b> Redes CNN’s clássicas</a></li>
<li class="chapter" data-level="7.2.4" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#aprendizado-por-transferência"><i class="fa fa-check"></i><b>7.2.4</b> Aprendizado por transferência</a></li>
<li class="chapter" data-level="7.2.5" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#redes-neurais-na-prática"><i class="fa fa-check"></i><b>7.2.5</b> Redes neurais na prática</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#redes-neurais-siamesas"><i class="fa fa-check"></i><b>7.3</b> Redes Neurais Siamesas</a><ul>
<li class="chapter" data-level="7.3.1" data-path="deep-learning-em-visão-computacional.html"><a href="deep-learning-em-visão-computacional.html#arquitetura"><i class="fa fa-check"></i><b>7.3.1</b> Arquitetura</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="separação-plano-de-fundo.html"><a href="separação-plano-de-fundo.html"><i class="fa fa-check"></i><b>8</b> Separação Plano de Fundo</a><ul>
<li class="chapter" data-level="8.1" data-path="separação-plano-de-fundo.html"><a href="separação-plano-de-fundo.html#fixo"><i class="fa fa-check"></i><b>8.1</b> Fixo</a></li>
<li class="chapter" data-level="8.2" data-path="separação-plano-de-fundo.html"><a href="separação-plano-de-fundo.html#média-temporal"><i class="fa fa-check"></i><b>8.2</b> Média Temporal</a></li>
<li class="chapter" data-level="8.3" data-path="separação-plano-de-fundo.html"><a href="separação-plano-de-fundo.html#mediana-temporal"><i class="fa fa-check"></i><b>8.3</b> Mediana Temporal</a></li>
<li class="chapter" data-level="8.4" data-path="separação-plano-de-fundo.html"><a href="separação-plano-de-fundo.html#exemplos-comparativos-da-média-temporal-média-espaço-temporal-e-mediana-temporal"><i class="fa fa-check"></i><b>8.4</b> Exemplos comparativos da Média Temporal, Média Espaço-Temporal e Mediana Temporal</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="refêrencias.html"><a href="refêrencias.html"><i class="fa fa-check"></i>Refêrencias</a></li>
<li class="divider"></li>
<li><center>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
</a></li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Material introdutório de Processamento Digital de Imagens e Visão Computacional</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="filtros-digitais" class="section level1">
<h1><span class="header-section-number">Capítulo 5</span> Filtros Digitais</h1>
<p>Filtros digitais representam um conjunto de ferramentas poderosas para realizar operações em imagens. Diferente das operações de ponto que operam sobre um único pixel, as operações utilizando filtros levam em consideração os pixels próximos ao pixel que atualmente está em modificação. Isso nos permite realizar alterações muito mais complexas do que as realizadas anteriormente. Como exemplos disso podemos considerar a operação <em>sharpen</em> (aguçamento) e <em>blur</em> (suavização), que podem ser observados na Figura <a href="filtros-digitais.html#fig:onibusSharpenNBlur">5.1</a> (a) e Figura <a href="filtros-digitais.html#fig:onibusSharpenNBlur">5.1</a> (b), respectivamente.</p>

<div class="figure" style="text-align: center"><span id="fig:onibusSharpenNBlur"></span>
<img src="imagens/05-filtros/onibusShapenNBlur.png" alt="Imagem de ônibus com filtro de aguçamento e de suavização[8, p. 98]" width="55%" />
<p class="caption">
Figura 5.1: Imagem de ônibus com filtro de aguçamento e de suavização<span class="citation">[<a href="#ref-burger2009" role="doc-biblioref">8</a>, p. 98]</span>
</p>
</div>
<div id="convolução" class="section level2">
<h2><span class="header-section-number">5.1</span> Convolução</h2>
<p>Convolução é uma operação muito utilizada em PDI tendo suas origens na matemática, onde é definida como uma operação realizada entre duas funções e que resulta numa terceira. Em outras palavras, a convolução recebe dois sinais como entrada e gera um sinal como saída. No caso de PDI, podemos imaginar os sinais de entrada como sendo a nossa imagem original e o <em>kernel</em> do filtro, e a nossa saída como sendo a imagem filtrada.</p>
<p>Quando dizemos <em>kernel</em>, estamos nos referindo a uma função ou, no caso de PDI, a uma matriz que é aplicada a nossa imagem usando a convolução que irá produzir outra imagem como saída. Na Tabela <a href="filtros-digitais.html#tab:kernelExample">5.1</a>, temos exemplos de alguns tipos de <em>kernels</em> que podem ser utilizados na convolução e seus respectivos resultados. Além dos efeitos mais comuns como o de desfoque (<em>blur</em>), podemos utilizar <em>kernels</em> que extraiam informações mais complexas das imagens, como os detectores de borda que serão discutidos mais a fundo nos próximos tópicos.</p>
<table>
<caption><span id="tab:kernelExample">Tabela 5.1: </span> Exemplo de <em>kernels</em> (adaptada de <span class="citation">[<a href="#ref-tab:kernelExample" role="doc-biblioref">13</a>]</span>).</caption>
<colgroup>
<col width="34%" />
<col width="31%" />
<col width="34%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Operação</th>
<th align="center"><em>Kernel</em></th>
<th align="center">Resultado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Identidade (Imagem Original)</td>
<td align="center"><span class="math display">\[\begin{bmatrix}
0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0
\end{bmatrix}\]</span></td>
<td align="center"><img src="imagens/05-filtros/esquilo1.png" /></td>
</tr>
<tr class="even">
<td align="center">Detecção de borda</td>
<td align="center"><span class="math display">\[\begin{bmatrix}
-1 &amp; -1 &amp; -1\\
-1 &amp; 8 &amp; -1\\
-1 &amp; -1 &amp; -1
\end{bmatrix}\]</span></td>
<td align="center"><img src="imagens/05-filtros/esquilo2.png" /></td>
</tr>
<tr class="odd">
<td align="center">Média (box blur)</td>
<td align="center"><span class="math display">\[\frac{1}{9}\begin{bmatrix}
1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1
\end{bmatrix}\]</span></td>
<td align="center"><img src="imagens/05-filtros/esquilo3.png" /></td>
</tr>
<tr class="even">
<td align="center">Gaussian blur</td>
<td align="center"><span class="math display">\[\frac{1}{16}\begin{bmatrix}
1 &amp; 2 &amp; 1\\
2 &amp; 4 &amp; 2\\
1 &amp; 2 &amp; 1
\end{bmatrix}\]</span></td>
<td align="center"><img src="imagens/05-filtros/esquilo1.png" /></td>
</tr>
</tbody>
</table>
<p>Em porcessamento de sinais a operação de convolução geralmente é representada pelo síbolo <span class="math inline">\(*\)</span> e pode ser descrita, em poucas palavras, como uma soma de produtos entre um ponto do <em>kernel</em> e um ponto correspondente da imagem. Essa correspondência é encontrada fazendo um deslizamento sobre a imagem de entrada. A Figura <a href="filtros-digitais.html#fig:convolutionGif">5.2</a> representa de maneira visual a convolução em um cenário de uma dimensão, através do sinal de entrada (<em>signal</em>) e o <em>kernel</em>. Podemos ainda perceber que o <em>kernel</em> está rotacionado em 180º, isso se deve a definição de convolução.</p>

<div class="figure" style="text-align: center"><span id="fig:convolutionGif"></span>
<img src="imagens/05-filtros/convolutionGif.png" alt="Convolução em uma dimensão [14]" width="55%" />
<p class="caption">
Figura 5.2: Convolução em uma dimensão <span class="citation">[<a href="#ref-img:convolutionGif" role="doc-biblioref">14</a>]</span>
</p>
</div>
<p>Algo interessante que podemos observar na imagem <a href="filtros-digitais.html#fig:convolutionGif">5.2</a> é que nosso sinal de entrada é quase totalmente 0 e contém um único ponto 1. Isso faz com que nosso resultado seja uma cópia do <em>kernel</em>. A partir disso, conseguimos imaginar o por que de termos como resultado a própria imagem quando aplicado um <em>kernel</em> identidade, como mostrado na tabela <a href="filtros-digitais.html#tab:kernelExample">5.1</a>.</p>
<p>Antes de irmos mais adiante no assunto, é importante esclarecermos alguns conceitos para que não se tornem confusos. Existe outra operação matemática extremamente parecida com a convolução chamada correlação, sendo que ela também realiza a soma de multiplicações com a diferença de que ela não rotaciona o <em>kernel</em>.</p>
<p>Para entendermos bem essa diferença, podemos observar a figura <a href="filtros-digitais.html#fig:correlationNConvolution1D">5.3</a>, onde temos um exemplo de correlação e convolução sendo executados em um espaço unidimensional. Temos uma função <span class="math inline">\(f\)</span> e um filtro <span class="math inline">\(w\)</span> na figura <a href="filtros-digitais.html#fig:correlationNConvolution1D">5.3</a> (a) e (b) respectivamente. Na sequência, em (b) e (j), temos as funções e os filtros prontos para iniciar a correlação e a convolução. Nas etapas (c) e (k), podemos ver o preenchimento com zeros. Isso ocorre porque há partes das funções que não se sobrepõem. Dessa forma, permite que <span class="math inline">\(w\)</span> percorra todos os pixels de <span class="math inline">\(f\)</span>. Após isso, é realizado o primeiro passo da correlação e convolução, onde podemos observar que o resultado é 0 já que <span class="math inline">\(w\)</span> está sobreposto por somente zeros. Logo, a soma da multiplicação de cada item de <span class="math inline">\(w\)</span> por <span class="math inline">\(f\)</span> será zero. Deslocamos então o filtro <span class="math inline">\(w\)</span> em uma unidade a direita, onde o resultado novamente será 0. O primeiro resultado não nulo se dará no terceiro deslocamento, sendo 8 para a correlação e <span class="math inline">\(1\)</span> para a convolução. Temos o resultado de ambas operações em (g) e (o) e o resultado recortado em (h) e (p), recorte este que remove os zeros até o tamanho ficar igual ao da <span class="math inline">\(f\)</span> inicial.</p>

<div class="figure" style="text-align: center"><span id="fig:correlationNConvolution1D"></span>
<img src="imagens/05-filtros/correlationNConvolution1D.png" alt="Ilustração de correlação e convolução unidimensional [2, p. 96]" width="55%" />
<p class="caption">
Figura 5.3: Ilustração de correlação e convolução unidimensional <span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 96]</span>
</p>
</div>
<p>Vamos extender agora essas duas operações à aplicação em duas dimensões. Uma representação disso pode ser vista na Figura <a href="filtros-digitais.html#fig:correlationNConvolution2D">5.4</a>, onde temos novamente o <em>kernel</em> <span class="math inline">\(w\)</span> e a função <span class="math inline">\(f\)</span>. Percebe-se outra vez o efeito de se aplicar o <em>kernel</em> em uma imagem com apenas o número 1 no meio, nos dois casos temos como saída a cópia do <em>kernel</em> aplicado, com a diferença que na correlação o <em>kernel</em> aparece rotacionado no resultado. Assim, nota-se que se pré-rotacionarmos o filtro e realizarmos a correlação teremos no final uma convolução.</p>
<p>Já que a correlação e convolução são iguais, é preciso saber qual delas utilizar. Segundo Gonzalez, <span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 98]</span>, isso é uma questão de preferência e qualquer uma das duas operações conseguem realizar a outra com uma simples rotação do <em>kernel</em>. Essa questão se torna ainda menos relevante quando utilizamos filtros que são simétricos, pois, como antes e após a rotação temos o mesmo <em>kernel</em>, tanto correlação ou convolução nos darão o mesmo resultado. Já usando <em>kernels</em> assimétricos, temos resultados diferentes. Já, segundo Moeslund <span class="citation">[<a href="#ref-moeslund2012" role="doc-biblioref">7</a>, p. 87]</span>, quando trabalhamos com filtros de desfoque, detectores de borda, entre outros, o processo de se aplicar o <em>kernel</em> é comumente chamado de convolução mesmo quando na prática se é implementada a correlação.</p>

<div class="figure" style="text-align: center"><span id="fig:correlationNConvolution2D"></span>
<img src="imagens/05-filtros/correlationNConvolution2D.png" alt="Ilustração de correlação e convolução bidimensional [2, p. 98]" width="55%" />
<p class="caption">
Figura 5.4: Ilustração de correlação e convolução bidimensional <span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 98]</span>
</p>
</div>
<div id="definção-matemática-da-convolução" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Definção matemática da convolução</h3>
<p>Vamos explorar um pouco das notações matemáticas utilizadas para representar a convolução e a correlação, assim também poderemos consolidar a idéia de que ambas são muito correlacionadas.
Como dito no início desta seção, geralmente a convolução é identificada por <span class="math inline">\(*\)</span>. Já a correlação costuma ser identificada por ☆. A correlação em duas dimensões segue a seguinte equação:</p>
<p><span class="math display">\[g(x,y) = w(x,y)☆f(x,y) = \sum_{s=-a}^{a}\sum_{t=-b}^{b}\   w(s,t)f(x+s,y+t)\]</span></p>
<p>Onde <span class="math inline">\(w\)</span> é nosso <span class="math inline">\(kernel\)</span> e <span class="math inline">\(f\)</span> nossa imagem. Podemos perceber que ambas são funções de duas variáveis, <span class="math inline">\(x\)</span> e <span class="math inline">\(y\)</span>, pois estamos trabalhando em duas dimensões.
Os limites dos somatórios são dados por <span class="math inline">\(a=(m-1)/2\)</span> e <span class="math inline">\(b=(n-1)/2\)</span> e o que essa função faz é andar em cada posição da imagem, ou seja, <span class="math inline">\((x,y)\)</span>, e substituir o <em>píxel</em> atual pela soma de produtos da multiplicação dos valores do <span class="math inline">\(kernel\)</span> pelos valores dos <em>píxels</em> da imagem. Já a convolução tem uma equação bem similar, sendo diferente apenas pelos sinais negativos em <span class="math inline">\(f\)</span>, o que evidência a rotação do <span class="math inline">\(kernel\)</span>. Podemos notar que os sinais inversos estão em <span class="math inline">\(f\)</span> e não em <span class="math inline">\(w\)</span>. Segundo Gonzalez<span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 98]</span>, isso é usado para fins de simplicidade de notação e não alteram o resultado.</p>
<p><span class="math display">\[g(x,y) = w(x,y)*f(x,y) = \sum_{s=-a}^{a}\sum_{t=-b}^{b}\   w(s,t)f(x-s,y-t)\]</span>.</p>
<p>Uma das melhores maneiras de entender bem as equações é ver um exemplo prático. Veremos isso a seguir, onde temos um exemplo passo-a-passo de correlação:</p>
<p><img src="imagens/05-filtros/conv_1.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(0,0\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(0+s,0+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(-1,-1\right)\text{+w}\left(-1,0\right)\text{f}\left(-1,0\right)\text{+w}\left(-1,1\right)\text{f}\left(-1,1\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(0,-1\right)\text{+w}\left(0,0\right)\text{f}\left(0,0\right)\text{+w}\left(0,1\right)\text{f}\left(0,1\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(1,-1\right)\text{+w}\left(0,1\right)\text{f}\left(0,-1\right)\text{+w}\left(1,1\right)\text{f}\left(-1,-1\right)\\
=\,1\cdot0+0\cdot0+\left(-1\right)\cdot0\\
+2\cdot0+0\cdot2+\left(-2\right)\cdot1\\
+1\cdot0+0\cdot9+\left(-1\right)\cdot3\\
=0\,-2-3\,=\,-5
\]</span></p>
<p><img src="imagens/05-filtros/conv_2.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(0,1\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(0+s,1+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(-1,0\right)\text{+w}\left(-1,0\right)\text{f}\left(-1,1\right)\text{+w}\left(-1,1\right)\text{f}\left(-1,2\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(0,0\right)\text{+w}\left(0,0\right)\text{f}\left(0,1\right)\text{+w}\left(0,1\right)\text{f}\left(0,2\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(1,0\right)\text{+w}\left(1,0\right)\text{f}\left(1,1\right)\text{+w}\left(1,1\right)\text{f}\left(1,2\right)\\
=\,1\cdot0+0\cdot0+\left(-1\right)\cdot0\\
+2\cdot2+0\cdot1+\left(-2\right)\cdot0\\
+1\cdot9+0\cdot3+\left(-1\right)\cdot1\\
=0\,+4+8=\,12
\]</span></p>
<p><img src="imagens/05-filtros/conv_3.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(0,2\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(0+s,2+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(-1,1\right)\text{+w}\left(-1,0\right)\text{f}\left(-1,2\right)\text{+w}\left(-1,1\right)\text{f}\left(-1,3\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(0,1\right)\text{+w}\left(0,0\right)\text{f}\left(0,2\right)\text{+w}\left(0,1\right)\text{f}\left(0,3\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(1,1\right)\text{+w}\left(1,0\right)\text{f}\left(1,2\right)\text{+w}\left(1,1\right)\text{f}\left(1,3\right)\\
=\,1\cdot0+0\cdot0+\left(-1\right)\cdot0\\
+2\cdot1+0\cdot0+\left(-2\right)\cdot0\\
+1\cdot3+0\cdot1+\left(-1\right)\cdot0\\
=0\,+2+3=\,5
\]</span></p>
<p><img src="imagens/05-filtros/conv_4.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(1,0\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(1+s,0+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(0,-1\right)\text{+w}\left(-1,0\right)\text{f}\left(0,0\right)\text{+w}\left(-1,1\right)\text{f}\left(0,1\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(1,-1\right)\text{+w}\left(0,0\right)\text{f}\left(1,0\right)\text{+w}\left(0,1\right)\text{f}\left(1,1\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(2,-1\right)\text{+w}\left(1,0\right)\text{f}\left(2,0\right)\text{+w}\left(1,1\right)\text{f}\left(2,1\right)\\
=\,1\cdot0+0\cdot2+\left(-1\right)\cdot1\\
+2\cdot0+0\cdot9+\left(-2\right)\cdot3\\
+1\cdot0+0\cdot5+\left(-1\right)\cdot4\\
=\left(-1\right)\,+\left(-6\right)+\left(-4\right)=\,-11    
\]</span></p>
<p><img src="imagens/05-filtros/conv_5.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(1,1\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(1+s,1+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(0,0\right)\text{+w}\left(-1,0\right)\text{f}\left(0,1\right)\text{+w}\left(-1,1\right)\text{f}\left(0,2\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(1,0\right)\text{+w}\left(0,0\right)\text{f}\left(1,1\right)\text{+w}\left(0,1\right)\text{f}\left(1,2\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(2,0\right)\text{+w}\left(1,0\right)\text{f}\left(2,1\right)\text{+w}\left(1,1\right)\text{f}\left(2,2\right)\\
=\,1\cdot2+0\cdot1+\left(-1\right)\cdot0\\
+2\cdot9+0\cdot3+\left(-2\right)\cdot1\\
+1\cdot5+0\cdot4+\left(-1\right)\cdot2\\
=2\,+16+3=\,21    
\]</span></p>
<p><img src="imagens/05-filtros/conv_6.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(1,2\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(1+s,2+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(0,1\right)\text{+w}\left(-1,0\right)\text{f}\left(0,2\right)\text{+w}\left(-1,1\right)\text{f}\left(0,3\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(1,1\right)\text{+w}\left(0,0\right)\text{f}\left(1,2\right)\text{+w}\left(0,1\right)\text{f}\left(1,3\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(2,1\right)\text{+w}\left(1,0\right)\text{f}\left(2,2\right)\text{+w}\left(1,1\right)\text{f}\left(2,3\right)\\
=\,1\cdot1+0\cdot1+\left(-1\right)\cdot0\\
+2\cdot3+0\cdot1+\left(-2\right)\cdot0\\
+1\cdot4+0\cdot2+\left(-1\right)\cdot0\\
=1\,+6+4=\,11    
\]</span></p>
<p><img src="imagens/05-filtros/conv_7.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(2,0\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(2+s,0+t\right)\text{=}\\
\text{+w}\left(-1,-1\right)\text{f}\left(1,-1\right)\text{+w}\left(-1,0\right)\text{f}\left(1,0\right)\text{+w}\left(-1,1\right)\text{f}\left(1,1\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(2,-1\right)\text{+w}\left(0,0\right)\text{f}\left(2,0\right)\text{+w}\left(0,1\right)\text{f}\left(2,1\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(3,-1\right)\text{+w}\left(1,0\right)\text{f}\left(3,0\right)\text{+w}\left(1,1\right)\text{f}\left(3,1\right)\\
=\,1\cdot0+0\cdot9+\left(-1\right)\cdot3\\
+2\cdot0+0\cdot5+\left(-2\right)\cdot4\\
+1\cdot0+0\cdot0+\left(-1\right)\cdot0\\
=\left(-3\right)+\left(-8\right)+0=\,-11
\]</span></p>
<p><img src="imagens/05-filtros/conv_8.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{*f}\left(2,1\right)\text{=}\sum_{s}^{}\sum_{t}^{}\text{w}\left(s,t\right)\text{f}\left(2+s,1+t\right)\,\text{=}\,\\
\text{+w}\left(-1,-1\right)\text{f}\left(1,0\right)\text{+w}\left(-1,0\right)\text{f}\left(1,1\right)\text{+w}\left(-1,1\right)\text{f}\left(1,2\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(2,0\right)\text{+w}\left(0,0\right)\text{f}\left(2,1\right)\text{+w}\left(0,1\right)\text{f}\left(2,2\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(3,0\right)\text{+w}\left(1,0\right)\text{f}\left(3,1\right)\text{+w}\left(1,1\right)\text{f}\left(3,2\right)\\
=\,1\cdot9+0\cdot3+\left(-1\right)\cdot1\\
+2\cdot5+0\cdot4+\left(-2\right)\cdot2\\
+1\cdot0+0\cdot0+\left(-1\right)\cdot0\\
=8+6+0=\,14\\
\]</span></p>
<p><img src="imagens/05-filtros/conv_9.png" width="55%" style="display: block; margin: auto;" />
<span class="math display">\[
\text{w}\text{f}\left(2,2\right)\text{=}\sum{s}^{}\sum{t}^{}\text{w}\left(s,t\right)\text{f}\left(2+s,2+t\right)\text{=}\\
\text{+w}\left(-1,-1\right)\text{f}\left(1,1\right)\text{+w}\left(-1,0\right)\text{f}\left(1,2\right)\text{+w}\left(-1,1\right)\text{f}\left(1,3\right)\\
\text{+w}\left(0,-1\right)\text{f}\left(2,1\right)\text{+w}\left(0,0\right)\text{f}\left(2,2\right)\text{+w}\left(0,1\right)\text{f}\left(2,3\right)\\
\text{+w}\left(1,-1\right)\text{f}\left(3,1\right)\text{+w}\left(1,0\right)\text{f}\left(3,2\right)\text{+w}\left(1,1\right)\text{f}\left(3,3\right)\\
=,1\cdot3+0\cdot1+\left(-1\right)\cdot0\\
+2\cdot4+0\cdot2+\left(-2\right)\cdot0\\
+1\cdot0+0\cdot0+\left(-1\right)\cdot0\\
=3+8+0=11
\]</span></p>
<p><img src="imagens/05-filtros/conv_final.png" width="55%" style="display: block; margin: auto;" />
Fonte: Autoria própria inspirado em <a href="http://www.songho.ca/dsp/convolution/convolution2d_example.html" class="uri">http://www.songho.ca/dsp/convolution/convolution2d_example.html</a> e <a href="https://arxiv.org/abs/1603.07285" class="uri">https://arxiv.org/abs/1603.07285</a></p>
<p>O exemplo utiliza um <span class="math inline">\(kernel\)</span> assimétrico. Então, os resultados da correlação e convolução são diferentes. Deixaremos isso como um exercício ao leitor, realizar a convolução para provar a diferença. O caso anterior tem também uma característica que é o complemento das bordas com 0’s para que o <span class="math inline">\(kernel\)</span> pudesse ser aplicado sobre toda a imagem. Essa é uma das maneiras de lidar com o problema das bordas, sendo que temos essa e mais algumas possibilidades <span class="citation">[<a href="#ref-burger2009" role="doc-biblioref">8</a>, p. 125]</span> <span class="citation">[<a href="#ref-chityala2020" role="doc-biblioref">15</a>, p. 60]</span>:</p>
<ul>
<li><p>Preenchimento com constante (<em>constant padding</em>):
Método onde as laterais são preenchidas com um valor constante, comumente 0.</p></li>
<li><p>Preenchimento com vizinho (<em>nearest neighbor</em>):
Se realiza o preenchimento das bordas adicionais com os valores dos vizinhos mais próximos.</p></li>
<li><p>Reflexão (<em>reflect</em>):
Os pixels das bordas da imagem são repetidos nas bordas adicionais.</p></li>
<li><p>Repetição (ou <em>wrap</em>):
A imagem é repetida nas bordas.</p></li>
</ul>
<p>Além dos métodos apresentados existem outras técnicas que podem ser utilizadas, sendo que em cada caso se escolhe a que melhor se ajusta à tarefa realizada.</p>
<p>O último ponto a ser explorado é a escolha do tamanho ideal do preenchimento que deve ser aplicado à imagem. De forma geral, se temos uma imagem (<span class="math inline">\(f\)</span>), um <em>kernel</em> (<span class="math inline">\(w\)</span>) e um preenchimento (<span class="math inline">\(p\)</span>), podemos escrever a seguinte relação<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>:</p>
<p><span class="math display">\[saída = (f_{vertical} - w_{vertical} + p_{vertical} + 1) \times  (f_{horizontal} - w_{horizontal} + p_{horizontal} + 1)\]</span>
Isso nos leva a perceber que o tamanho da imagem de saída aumenta conforme o preenchimento. Na maioria dos casos, queremos que a imagem de entrada e saída tenha o mesmo tamanho, então usamos <span class="math inline">\(p_{vertical} = k_{vertical} - 1\)</span> e <span class="math inline">\(p_{horizontal} = k_{horizontal} - 1\)</span>. E como, geralmente, o <em>kernel</em> tem tamanho ímpar, utilizamos <span class="math inline">\(\frac{p_{vertical}}{2}\)</span> e <span class="math inline">\(\frac{p_{horizontal}}{2}\)</span>.</p>
</div>
</div>
<div id="filtro-da-média" class="section level2">
<h2><span class="header-section-number">5.2</span> Filtro da Média</h2>
<p>O filtro da média é um tipo de filtro que utiliza a média dos valores dos <em>píxels</em> próximos ao <em>píxel</em> central. Como esse tipo de filtro realiza uma operação linear, ele é classificado como um filtro linear de suavização. Essa suavização se dá exatamente pelo tipo da operação utilizada, a média dos <em>píxels</em> vizinhos, que diminui a nitidez pela redução das transições abruptas nos níveis de intensidade. Um dos problemas que podem ocorrer é que as bordas também são mudanças abruptas, então podem ser comprometidas pelo filtro. Na figura <a href="filtros-digitais.html#fig:onibusBoxFilter">5.5</a>, temos um exemplo do efeito desse filtro:</p>

<div class="figure" style="text-align: center"><span id="fig:onibusBoxFilter"></span>
<img src="imagens/05-filtros/onibusShapenNBlur.png" alt="Imagem de ônibus com filtro de aguçamento e de suavização [8, p. 98]" width="55%" />
<p class="caption">
Figura 5.5: Imagem de ônibus com filtro de aguçamento e de suavização <span class="citation">[<a href="#ref-burger2009" role="doc-biblioref">8</a>, p. 98]</span>
</p>
</div>
<p>A máscara (<em>kernel</em>) de um filtro de média pode ser representada por:</p>
<p><span class="math display">\[\begin{bmatrix}
\frac{1}{9} &amp; \frac{1}{9} &amp; \frac{1}{9}\\
\frac{1}{9} &amp; \frac{1}{9} &amp; \frac{1}{9}\\
\frac{1}{9} &amp; \frac{1}{9} &amp; \frac{1}{9}
\end{bmatrix} =
\frac{1}{9}
\begin{bmatrix}
1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1
\end{bmatrix}
\]</span>
A primeira forma é a soma de todos os valores divididos por 9, o qual é o tamanho do filtro. A segunda forma, onde todos os coeficientes do <em>kernel</em> são 1’s, é mais eficiente computacionalmente, pois realizamos todas as somas e multiplicações antes de dividirmos. Esse tipo de filtro é muitas vezes chamado de <em>box filter</em>.</p>

<div class="figure" style="text-align: center"><span id="fig:filtrosLetras"></span>
<img src="imagens/05-filtros/filtrosLetras.png" alt="Imagem com diferentes tamanhos de filtro de média[2, p. 102]" width="55%" />
<p class="caption">
Figura 5.6: Imagem com diferentes tamanhos de filtro de média<span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 102]</span>
</p>
</div>
<p>Na figura <a href="filtros-digitais.html#fig:filtrosLetras">5.6</a>, temos um exemplo onde foram aplicados filtros de média com diferentes tamanhos, 3x3(b) ; 5x5(c) ; 9x9(d) ; 15x15(e) e 35x35(f). Podemos notar que com o menor filtro, o de tamanho 3, temos um leve borramento na imagem toda, mas que as partes que tem o mesmo tamanho ou são menores que o filtro tem um borramento maior. Isso exemplifica umas das importantes aplicações dos filtros de suavização, que é a de desfocar os objetos menores e deixar os maiores em maior evidência.</p>

<div class="figure" style="text-align: center"><span id="fig:filtrosMediaHubble"></span>
<img src="imagens/05-filtros/filtrosMediaHubble.png" alt="Exemplo de uso do desfoque [2, p. 103]" width="55%" />
<p class="caption">
Figura 5.7: Exemplo de uso do desfoque <span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 103]</span>
</p>
</div>
<p>Na figura <a href="filtros-digitais.html#fig:filtrosMediaHubble">5.7</a>, podemos ver como o desfoque pode ser utilizado para encontrar os detalhes principais da imagem. Nesta imagem obtida a partir do telescópio Hubble foi aplicado o desfoque para diminuir a visibilidade dos objetos menores e dar maior ênfase aos da frente. E, então, foi limiarizado o resultado a fim de destacar esses objetos.</p>
</div>
<div id="filtro-da-mediana" class="section level2">
<h2><span class="header-section-number">5.3</span> Filtro da Mediana</h2>
<p>A mediana é um filtro não linear que utiliza como princípio a própria técnica estatística, que consiste em colocar um conjunto de dados em ordem e selecionar o valor central. Esse tipo de filtro é muito eficiente na remoção de ruído, principalmente o tipo de ruído conhecido como ruído sal e pimenta, que tem como característica a ocorrencia de pixels pretos e brancos.
Como dito anteriormente, a mediana consiste em ordenar o conjunto de dados. Nesse caso os valores da vizinhança do <em>píxel</em>. Se usarmos uma vizinhança de tamanho 3x3, a mediana será o quinto maior valor, pois consideramos também o valor do <em>píxel</em> central na vizinhança ordenada.</p>
<p>Na figura <a href="filtros-digitais.html#fig:placaEletronicaMediana">5.8</a>, temos um exemplo mostrando uma imagem de raios X de uma placa de circuitos eletrônicos com a presença de ruído tipo sal e pimenta (a). A figura também apresenta as respectivas aplicações de um filtro da média (b) e do filtro da mediana (c), ambos com <em>kernel</em> de tamanho 3x3. Na figura, é possível perceber o quanto o filtro da mediana se sai melhor na remoção do ruído.</p>

<div class="figure" style="text-align: center"><span id="fig:placaEletronicaMediana"></span>
<img src="imagens/05-filtros/placaEletronicaMediana.png" alt="Remoção de ruído [2, p. 103]" width="55%" />
<p class="caption">
Figura 5.8: Remoção de ruído <span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 103]</span>
</p>
</div>
</div>
<div id="filtro-gaussiano" class="section level2">
<h2><span class="header-section-number">5.4</span> Filtro Gaussiano</h2>
<p>Filtro de Gauss é um filtro simétrico (isotrópico) usado para suavizar imagens. Ele funciona análogo a um filtro de média ponderada, mas com um padrão, isto é, dá ênfase ao pixel central da máscara (<em>kernel</em>) e menor ênfase a medida que os demais se distanciam do centro, seguindo um gradiente muito similar à distribuição gaussiana. O “similar” se deve somente ao fato que será necessário truncamentos, assim, havendo erros e por ser desconsiderado a constante multiplicadora, o que melhora o perfil da função para aplicação em PDI.</p>
<ul>
<li><p><em>Função gaussiana:</em> <span class="math display">\[g(x) = \frac{1}{\sigma\sqrt{2\pi}}e^{-\frac{(x-\mu)^2}{2\sigma^2}}\]</span></p></li>
<li><p><em>Função gaussiana modificada:</em> <span class="math display">\[g(x) = e^{-\frac{(x-\mu)^2}{2\sigma^2}}\]</span></p></li>
</ul>
<p>Note na Figura x que a função tem formato de sino, variando de acordo com os valores atribuídos ao <span class="math inline">\(\sigma\)</span> ou desvio padrão, que dependerá da ênfase desejada no cálculo. A medida que <span class="math inline">\(\sigma\)</span> aumenta, maior é o peso dado às “caldas” da função, no caso, aos <em>pixels</em> mais distantes do centro do <em>kernel</em>. Essa característica é representada no gráfico da Figura <a href="filtros-digitais.html#fig:funcaoGaussiana">5.9</a>.</p>
<p>A fim de que o <em>pixel</em> central da máscara esteja em <span class="math inline">\((0,0)\)</span>, considera-se <span class="math inline">\(\mu=0\)</span>.</p>

<div class="figure" style="text-align: center"><span id="fig:funcaoGaussiana"></span>
<img src="imagens/05-filtros/funcaoGaussiana.png" alt="Função gaussiana com \(\mu=0\) e diferentes \(\sigma\)" width="55%" />
<p class="caption">
Figura 5.9: Função gaussiana com <span class="math inline">\(\mu=0\)</span> e diferentes <span class="math inline">\(\sigma\)</span>
</p>
</div>
<p>O Filtro Gaussiano 2D é gerado através da convolução de dois vetores da mesma função - a imagem se refere ao subconjunto do contradomínio -, sendo estas, normalmente, oriundas da mesma função gaussiana modificada. De forma alternativa, ele também pode ser construído a partir da i-ésima linha do Triângulo de Pascal que corresponde ao tamanho do <em>kernel</em> desejado. Como o método é o mesmo para as duas fontes, explicaremos utilizando como fonte a função gaussiana modificada.</p>
<p>O procedimento primário é obter a imagem da função, mas para obter um filtro com intuito gaussiano se deve selecionar a amostragem dos pontos no intervalo de <span class="math inline">\(\pm 2.5\sigma\)</span> ou <span class="math inline">\(\pm 3.5\sigma\)</span> <span class="citation">[<a href="#ref-burger2009" role="doc-biblioref">8</a>, p. 114]</span>. Assim, escolhendo a pela primeira opção, procura-se <span class="math inline">\(g(-3)\)</span>, <span class="math inline">\(g(-2)\)</span>, <span class="math inline">\(g(-1)\)</span>, <span class="math inline">\(g(0)\)</span>, <span class="math inline">\(g(1)\)</span>, <span class="math inline">\(g(2)\)</span> e <span class="math inline">\(g(3)\)</span>. Entretanto, como alguns valores têm infinitas casas decimais, devemos truncá-los. Aqui escolhemos o uso de cinco casas decimais.</p>
<ul>
<li><span class="math inline">\(g(-3) = g(3) = 0,01110\)</span></li>
<li><span class="math inline">\(g(-2) = g(2) = 0,13533\)</span></li>
<li><span class="math inline">\(g(-1) = g(1) = 0,60653\)</span></li>
<li><span class="math inline">\(g(0) = 1\)</span></li>
</ul>
<p>Então, considera-se o menor valor como 1, no caso <span class="math inline">\(f(3)\)</span> e <span class="math inline">\(f(-3)\)</span>, e interpolamos os demais, truncando-os com propósito de obter a parte inteira. A divisão por 224 é oriunda da soma dos valores encontrados. Pronto, temos a máscara gaussiana 1D necessária:</p>
<p><span class="math inline">\(\frac{1}{224}\begin{bmatrix}1 &amp; 12 &amp; 54 &amp; 90 &amp; 54 &amp; 12 &amp; 1\end{bmatrix}\)</span></p>
<p>Com a máscara em mãos, convoluciona-se os seguintes fatores:</p>
<ul>
<li><p><span class="math inline">\(\frac{1}{224}\begin{bmatrix}1 &amp; 12 &amp; 54 &amp; 90 &amp; 54 &amp; 12 &amp; 1\end{bmatrix}\)</span></p></li>
<li><p><span class="math inline">\(\frac{1}{224}\begin{bmatrix}1 \\ 12 \\ 54 \\ 90 \\ 54 \\ 12 \\ 1\end{bmatrix}\)</span> é a transposta da máscara 1D</p></li>
<li><p><span class="math inline">\(f(x,y)\)</span> é a imagem de entrada</p></li>
</ul>
<p>Nessa propriedade há uma determinada ordem que é mais eficiente para o sistema digital, que é a convolução entre <span class="math inline">\(f(x,y)\)</span> e uma das máscaras 1D e, depois, a convolução desse resultado com a transposta desta máscara. Pronto, como saída teremos o filtro gaussiano aplicado a imagem.</p>

<div class="figure" style="text-align: center"><span id="fig:lettersGaussianFilter"></span>
<img src="imagens/05-filtros/LettersGaussianFilter.png" alt="Imagem com diferentes tamanhos de filtro gaussiano. (Adaptado:[2, p. 102])" width="55%" />
<p class="caption">
Figura 5.10: Imagem com diferentes tamanhos de filtro gaussiano. (Adaptado:<span class="citation">[<a href="#ref-gonzalez2010" role="doc-biblioref">2</a>, p. 102]</span>)
</p>
</div>
<p>Nesse exemplo, temos um exemplo similar ao usado no filtro de média, porém, usando-se o filtro gaussiano. A imagem de entrada (a) tem tamanho 500x500 onde foram aplicados filtros de diferentes tamanhos, 3x3(b) ; 5x5(c) ; 9x9(d) ; 15x15(e) e 35x35(f). Note que, ao contrário do exemplo anterior, há uma maior preservação da nítidez, todavia não seria um filtro eficiente para redução de ruído. Essa característica é devido ao maior peso dado ao <em>pixel</em> central do <em>kernel</em>.</p>

</div>
</div>
<h3>Refêrencias</h3>
<div id="refs" class="references">
<div id="ref-gonzalez2010">
<p>[2] R. C. Gonzalez e R. C. Woods, <em>Processamento digital de imagens</em>, 3º ed. São Paulo: Pearson Prentice Hall, 2010.</p>
</div>
<div id="ref-moeslund2012">
<p>[7] T. B. Moeslund, <em>Introduction to video and image processing: Building real systems and applications</em>. Springer Science &amp; Business Media, 2012.</p>
</div>
<div id="ref-burger2009">
<p>[8] W. Burger, M. J. Burge, M. J. Burge, e M. J. Burge, <em>Principles of digital image processing</em>, vol. 111. Springer, 2009.</p>
</div>
<div id="ref-tab:kernelExample">
<p>[13] W. Commons, “Kernel (image processing)”. 2011, [Online]. Disponível em: <a href="https://en.wikipedia.org/wiki/Kernel_(image_processing)">https://en.wikipedia.org/wiki/Kernel_(image_processing)</a>.</p>
</div>
<div id="ref-img:convolutionGif">
<p>[14] T. e2eML Course Catalog, “Convolution in one dimension for neural networks”. 2020, [Online]. Disponível em: <a href="https://e2eml.school/convolution_one_d.html">https://e2eml.school/convolution_one_d.html</a>.</p>
</div>
<div id="ref-chityala2020">
<p>[15] R. CHITYALA e S. PUDIPEDDI, <em>Image processing and acquisition using Python</em>. CRC Press, 2020.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Adaptado de <a href="https://d2l.ai/chapter_convolutional-neural-networks/padding-and-strides.html" class="uri">https://d2l.ai/chapter_convolutional-neural-networks/padding-and-strides.html</a><a href="filtros-digitais.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="transformações-radiométricas.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="segmentação.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": null
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/covap-utfpr/pdi/edit/master/05-filtros.Rmd",
"text": "Editar "
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"citation_package": "biblatex"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
